<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promised Message</title>
    <style>
        /* CSS for body */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #ffffff; /* Default background color */
            color: #000000; /* Default text color */
        }
        
        /* CSS for container */
        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
            text-align: center;
        }
        
        /* CSS for personalized promise */
        .personalized-promise {
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Your Promise</h1>
        <div class="personalized-promise">
            <!-- Personalized promise will be added dynamically -->
        </div>
    </div>

    <script>
        // Function to get URL parameter value by name
        function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Function to set background color based on promise category
        function setBackgroundColor(category) {
            var categoryColors = {
                love: "red",
                support: "blue",
                adventure: "green",
                communication: "yellow"
            };
            document.body.style.backgroundColor = categoryColors[category] || '#ffffff'; // Default to white if category not found
        }

        // Function to display personalized promise
        function displayPersonalizedPromise(promise) {
            var personalizedPromise = document.querySelector('.personalized-promise');
            personalizedPromise.textContent = promise || 'No personalized promise found.';
        }

        // Get promise ID from URL
        var promiseId = getUrlParameter('promiseId');

        // Example: Fetch promise details from your database or storage using promiseId
        // Replace this with your actual implementation to fetch promise details
        function fetchPromiseDetails(promiseId) {
            // Example AJAX call to fetch promise details
            // Replace this with your actual AJAX call
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    // Simulated promise details (replace with your actual implementation)
                    var promiseDetails = {
                        promiseId: promiseId,
                        category: 'love', // Example category
                        personalizedPromise: 'I promise to love you forever and always.' // Example personalized promise
                    };
                    resolve(promiseDetails);
                }, 1000); // Simulate delay for fetching data
            });
        }

        // Fetch promise details and update the page when it's loaded
        fetchPromiseDetails(promiseId)
            .then((promiseDetails) => {
                setBackgroundColor(promiseDetails.category);
                displayPersonalizedPromise(promiseDetails.personalizedPromise);
            })
            .catch((error) => {
                console.error('Error fetching promise details:', error);
            });
    </script>
</body>
</html>
